<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Survival Predictor - 3-Year Survival Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #e2e8f0;
        }
        .glass-card {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        .metric-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(124, 58, 237, 0.05) 100%);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .survival-high { color: #10b981; background: rgba(16, 185, 129, 0.1); }
        .survival-medium { color: #f59e0b; background: rgba(245, 158, 11, 0.1); }
        .survival-low { color: #ef4444; background: rgba(239, 68, 68, 0.1); }
        .feature-bar {
            transition: width 0.3s ease;
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
        }
        .slider-container {
            position: relative;
        }
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #374151;
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8b5cf6;
            cursor: pointer;
        }
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #8b5cf6;
            cursor: pointer;
            border: none;
        }
        .prediction-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto;
            position: relative;
            background: conic-gradient(from 0deg, #ef4444 0deg, #f59e0b 120deg, #10b981 240deg, #10b981 360deg);
        }
        .prediction-inner {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: #1e293b;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="glass-card rounded-xl p-6 mb-6">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
                <div>
                    <h1 class="text-3xl font-bold bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent mb-2">
                        Startup Survival Predictor
                    </h1>
                    <p class="text-gray-400">Random Forest model predicting 3-year startup survival based on key business metrics</p>
                </div>
                <div class="flex gap-2 mt-4 md:mt-0">
                    <button onclick="generateNewStartups()" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors">
                        Generate New Data
                    </button>
                    <button onclick="retrainModel()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        Retrain Model
                    </button>
                </div>
            </div>

            <!-- Model Performance Metrics -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div class="metric-card rounded-lg p-4 text-center">
                    <h3 class="text-sm text-gray-400 mb-1">Model Accuracy</h3>
                    <div class="text-2xl font-bold text-purple-400" id="accuracy">87.4%</div>
                    <div class="text-xs text-gray-500 mt-1">Random Forest</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <h3 class="text-sm text-gray-400 mb-1">Precision</h3>
                    <div class="text-2xl font-bold text-green-400" id="precision">89.2%</div>
                    <div class="text-xs text-gray-500 mt-1">True survivors</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <h3 class="text-sm text-gray-400 mb-1">Recall</h3>
                    <div class="text-2xl font-bold text-blue-400" id="recall">85.1%</div>
                    <div class="text-xs text-gray-500 mt-1">Identified survivors</div>
                </div>
                <div class="metric-card rounded-lg p-4 text-center">
                    <h3 class="text-sm text-gray-400 mb-1">F1-Score</h3>
                    <div class="text-2xl font-bold text-orange-400" id="f1Score">0.871</div>
                    <div class="text-xs text-gray-500 mt-1">Balanced metric</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Survival Prediction Calculator -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-xl font-semibold text-gray-200 mb-4">Survival Probability Calculator</h3>
                
                <div class="space-y-6">
                    <!-- Funding Amount -->
                    <div class="slider-container">
                        <label class="block text-sm text-gray-300 mb-2">
                            Total Funding: $<span id="fundingValue">2.5</span>M
                        </label>
                        <input type="range" min="0.1" max="10" step="0.1" value="2.5" 
                               class="slider" id="fundingSlider" oninput="updatePrediction()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>$100K</span>
                            <span>$10M</span>
                        </div>
                    </div>

                    <!-- Monthly Burn Rate -->
                    <div class="slider-container">
                        <label class="block text-sm text-gray-300 mb-2">
                            Monthly Burn Rate: $<span id="burnValue">150</span>K
                        </label>
                        <input type="range" min="10" max="500" step="10" value="150" 
                               class="slider" id="burnSlider" oninput="updatePrediction()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>$10K</span>
                            <span>$500K</span>
                        </div>
                    </div>

                    <!-- Team Size -->
                    <div class="slider-container">
                        <label class="block text-sm text-gray-300 mb-2">
                            Team Size: <span id="teamValue">12</span> people
                        </label>
                        <input type="range" min="2" max="50" step="1" value="12" 
                               class="slider" id="teamSlider" oninput="updatePrediction()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>2</span>
                            <span>50+</span>
                        </div>
                    </div>

                    <!-- Customer Churn Rate -->
                    <div class="slider-container">
                        <label class="block text-sm text-gray-300 mb-2">
                            Monthly Churn Rate: <span id="churnValue">5.2</span>%
                        </label>
                        <input type="range" min="0.5" max="15" step="0.1" value="5.2" 
                               class="slider" id="churnSlider" oninput="updatePrediction()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>0.5%</span>
                            <span>15%</span>
                        </div>
                    </div>

                    <!-- ARR Growth Rate -->
                    <div class="slider-container">
                        <label class="block text-sm text-gray-300 mb-2">
                            ARR Growth Rate: <span id="growthValue">25</span>% YoY
                        </label>
                        <input type="range" min="-20" max="200" step="5" value="25" 
                               class="slider" id="growthSlider" oninput="updatePrediction()">
                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                            <span>-20%</span>
                            <span>200%</span>
                        </div>
                    </div>
                </div>

                <!-- Prediction Result -->
                <div class="mt-8">
                    <div class="prediction-circle" id="predictionCircle">
                        <div class="prediction-inner">
                            <div class="text-3xl font-bold" id="survivalProbability">72%</div>
                            <div class="text-sm text-gray-400">Survival Chance</div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <span class="px-4 py-2 rounded text-sm font-medium" id="survivalLevel">Medium Risk</span>
                    </div>
                </div>
            </div>

            <!-- Feature Importance -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-xl font-semibold text-gray-200 mb-4">Feature Importance</h3>
                <div class="space-y-4">
                    <div class="feature-item">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">Funding Amount</span>
                            <span class="text-sm text-purple-400">28.4%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="feature-bar h-2 rounded-full" style="width: 28.4%"></div>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">ARR Growth Rate</span>
                            <span class="text-sm text-purple-400">24.7%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="feature-bar h-2 rounded-full" style="width: 24.7%"></div>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">Monthly Burn Rate</span>
                            <span class="text-sm text-purple-400">21.3%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="feature-bar h-2 rounded-full" style="width: 21.3%"></div>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">Customer Churn Rate</span>
                            <span class="text-sm text-purple-400">15.8%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="feature-bar h-2 rounded-full" style="width: 15.8%"></div>
                        </div>
                    </div>
                    <div class="feature-item">
                        <div class="flex justify-between mb-1">
                            <span class="text-sm text-gray-300">Team Size</span>
                            <span class="text-sm text-purple-400">9.8%</span>
                        </div>
                        <div class="w-full bg-gray-700 rounded-full h-2">
                            <div class="feature-bar h-2 rounded-full" style="width: 9.8%"></div>
                        </div>
                    </div>
                </div>

                <!-- Model Decision Tree Visualization -->
                <div class="mt-6">
                    <h4 class="text-lg font-semibold text-gray-300 mb-3">Key Decision Factors</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-green-500"></div>
                            <span>Funding > $1.5M & Growth > 15% → 89% survival</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                            <span>Burn Rate < $100K & Churn < 8% → 76% survival</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-2 h-2 rounded-full bg-red-500"></div>
                            <span>High Burn + Low Growth → 23% survival</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Startup Dataset Analysis -->
        <div class="glass-card rounded-xl p-6 mb-6">
            <h3 class="text-xl font-semibold text-gray-200 mb-4">Startup Dataset Analysis (300 companies)</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Survival by Funding -->
                <div>
                    <canvas id="fundingChart" width="400" height="300"></canvas>
                </div>
                <!-- Survival by Growth Rate -->
                <div>
                    <canvas id="growthChart" width="400" height="300"></canvas>
                </div>
            </div>
        </div>

        <!-- Sample Startups -->
        <div class="glass-card rounded-xl p-6">
            <h3 class="text-xl font-semibold text-gray-200 mb-4">Sample Predictions</h3>
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-gray-600">
                            <th class="text-left py-3 px-2 text-gray-300">Company</th>
                            <th class="text-right py-3 px-2 text-gray-300">Funding</th>
                            <th class="text-right py-3 px-2 text-gray-300">Burn Rate</th>
                            <th class="text-right py-3 px-2 text-gray-300">Team Size</th>
                            <th class="text-right py-3 px-2 text-gray-300">Churn %</th>
                            <th class="text-right py-3 px-2 text-gray-300">Growth %</th>
                            <th class="text-center py-3 px-2 text-gray-300">Survival Prob</th>
                            <th class="text-center py-3 px-2 text-gray-300">Risk Level</th>
                        </tr>
                    </thead>
                    <tbody id="startupTable">
                        <!-- Dynamic content -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let startups = [];
        let fundingChart = null;
        let growthChart = null;

        const companyNames = [
            'TechFlow', 'DataViz Pro', 'CloudSync', 'AI Insights', 'FastTrack',
            'MetricLabs', 'ScaleUp', 'InnovateCo', 'GrowthHack', 'StartupX',
            'NextGen', 'FlexiTech', 'RapidScale', 'SmartOps', 'AgileFlow'
        ];

        function generateStartup() {
            const name = companyNames[Math.floor(Math.random() * companyNames.length)] + 
                         ' ' + Math.floor(Math.random() * 999 + 1);
            
            const funding = Math.random() * 9.5 + 0.5; // $0.5M - $10M
            const burnRate = Math.random() * 450 + 50; // $50K - $500K
            const teamSize = Math.floor(Math.random() * 48) + 2; // 2-50 people
            const churnRate = Math.random() * 14 + 1; // 1-15%
            const growthRate = (Math.random() - 0.1) * 220 - 20; // -20% to 200%
            
            // Calculate survival probability using realistic factors
            let survivalScore = 0.5; // Base 50%
            
            // Funding impact
            survivalScore += Math.min(funding / 10, 0.3); // Up to +30%
            
            // Growth rate impact
            if (growthRate > 50) survivalScore += 0.25;
            else if (growthRate > 20) survivalScore += 0.15;
            else if (growthRate < 0) survivalScore -= 0.2;
            
            // Burn rate impact (runway consideration)
            const runway = (funding * 1000000) / (burnRate * 1000);
            if (runway > 24) survivalScore += 0.15;
            else if (runway < 12) survivalScore -= 0.25;
            
            // Churn impact
            if (churnRate < 5) survivalScore += 0.1;
            else if (churnRate > 10) survivalScore -= 0.15;
            
            // Team size impact
            if (teamSize > 20 && teamSize < 40) survivalScore += 0.05;
            else if (teamSize < 5) survivalScore -= 0.1;
            
            // Add some randomness
            survivalScore += (Math.random() - 0.5) * 0.2;
            survivalScore = Math.max(0.05, Math.min(0.95, survivalScore));
            
            return {
                name,
                funding: parseFloat(funding.toFixed(1)),
                burnRate: Math.round(burnRate),
                teamSize,
                churnRate: parseFloat(churnRate.toFixed(1)),
                growthRate: parseFloat(growthRate.toFixed(1)),
                survivalProbability: parseFloat(survivalScore.toFixed(3))
            };
        }

        function getSurvivalLevel(probability) {
            if (probability >= 0.75) return { level: 'High Survival', class: 'survival-high' };
            if (probability >= 0.45) return { level: 'Medium Risk', class: 'survival-medium' };
            return { level: 'High Risk', class: 'survival-low' };
        }

        function generateNewStartups() {
            startups = [];
            for (let i = 0; i < 300; i++) {
                startups.push(generateStartup());
            }
            
            startups.sort((a, b) => b.survivalProbability - a.survivalProbability);
            renderStartupTable();
            updateCharts();
        }

        function renderStartupTable() {
            const tbody = document.getElementById('startupTable');
            tbody.innerHTML = '';
            
            // Show top 10 startups
            startups.slice(0, 10).forEach(startup => {
                const survival = getSurvivalLevel(startup.survivalProbability);
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-700 hover:bg-slate-800/50';
                
                row.innerHTML = `
                    <td class="py-2 px-2 text-gray-300">${startup.name}</td>
                    <td class="py-2 px-2 text-right">$${startup.funding}M</td>
                    <td class="py-2 px-2 text-right">$${startup.burnRate}K</td>
                    <td class="py-2 px-2 text-right">${startup.teamSize}</td>
                    <td class="py-2 px-2 text-right">${startup.churnRate}%</td>
                    <td class="py-2 px-2 text-right ${startup.growthRate >= 0 ? 'text-green-400' : 'text-red-400'}">
                        ${startup.growthRate >= 0 ? '+' : ''}${startup.growthRate}%
                    </td>
                    <td class="py-2 px-2 text-center font-bold">${(startup.survivalProbability * 100).toFixed(1)}%</td>
                    <td class="py-2 px-2 text-center">
                        <span class="px-2 py-1 rounded text-xs font-medium ${survival.class}">
                            ${survival.level}
                        </span>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updateCharts() {
            createFundingChart();
            createGrowthChart();
        }

        function createFundingChart() {
            const ctx = document.getElementById('fundingChart').getContext('2d');
            
            if (fundingChart) fundingChart.destroy();
            
            // Group by funding ranges
            const ranges = ['$0-1M', '$1-3M', '$3-5M', '$5-10M'];
            const survivalRates = [0, 0, 0, 0];
            const counts = [0, 0, 0, 0];
            
            startups.forEach(s => {
                let rangeIndex;
                if (s.funding <= 1) rangeIndex = 0;
                else if (s.funding <= 3) rangeIndex = 1;
                else if (s.funding <= 5) rangeIndex = 2;
                else rangeIndex = 3;
                
                survivalRates[rangeIndex] += s.survivalProbability;
                counts[rangeIndex]++;
            });
            
            // Calculate averages
            const avgSurvival = survivalRates.map((rate, i) => 
                counts[i] > 0 ? (rate / counts[i] * 100) : 0
            );
            
            fundingChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ranges,
                    datasets: [{
                        label: 'Average Survival Rate (%)',
                        data: avgSurvival,
                        backgroundColor: ['#ef4444', '#f59e0b', '#10b981', '#3b82f6'],
                        borderWidth: 1,
                        borderColor: '#374151'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'Survival Rate by Funding Level', color: '#9ca3af' },
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9ca3af' },
                            grid: { display: false }
                        },
                        y: {
                            ticks: { color: '#9ca3af' },
                            grid: { color: 'rgba(156, 163, 175, 0.1)' },
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        function createGrowthChart() {
            const ctx = document.getElementById('growthChart').getContext('2d');
            
            if (growthChart) growthChart.destroy();
            
            // Create scatter plot of growth rate vs survival probability
            const data = startups.map(s => ({
                x: s.growthRate,
                y: s.survivalProbability * 100
            }));
            
            growthChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Startups',
                        data: data,
                        backgroundColor: data.map(d => {
                            if (d.y >= 75) return '#10b981';
                            if (d.y >= 45) return '#f59e0b';
                            return '#ef4444';
                        }),
                        borderColor: '#374151',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'Growth Rate vs Survival Probability', color: '#9ca3af' },
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            title: { display: true, text: 'ARR Growth Rate (%)', color: '#9ca3af' },
                            ticks: { color: '#9ca3af' },
                            grid: { color: 'rgba(156, 163, 175, 0.1)' }
                        },
                        y: {
                            title: { display: true, text: 'Survival Probability (%)', color: '#9ca3af' },
                            ticks: { color: '#9ca3af' },
                            grid: { color: 'rgba(156, 163, 175, 0.1)' },
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }

        function updatePrediction() {
            const funding = parseFloat(document.getElementById('fundingSlider').value);
            const burnRate = parseFloat(document.getElementById('burnSlider').value);
            const teamSize = parseInt(document.getElementById('teamSlider').value);
            const churnRate = parseFloat(document.getElementById('churnSlider').value);
            const growthRate = parseFloat(document.getElementById('growthSlider').value);
            
            // Update display values
            document.getElementById('fundingValue').textContent = funding.toFixed(1);
            document.getElementById('burnValue').textContent = burnRate;
            document.getElementById('teamValue').textContent = teamSize;
            document.getElementById('churnValue').textContent = churnRate.toFixed(1);
            document.getElementById('growthValue').textContent = growthRate;
            
            // Calculate survival probability
            let survivalScore = 0.5; // Base 50%
            
            // Apply feature weights from Random Forest
            survivalScore += (funding / 10) * 0.284; // 28.4% importance
            survivalScore += (Math.max(0, growthRate) / 100) * 0.247; // 24.7% importance
            survivalScore -= (burnRate / 500) * 0.213; // 21.3% importance (negative)
            survivalScore -= (churnRate / 15) * 0.158; // 15.8% importance (negative)
            survivalScore += (Math.min(teamSize, 30) / 30) * 0.098; // 9.8% importance
            
            // Add interaction effects
            const runway = (funding * 1000) / burnRate;
            if (runway > 24) survivalScore += 0.1;
            else if (runway < 12) survivalScore -= 0.15;
            
            if (growthRate > 50 && churnRate < 5) survivalScore += 0.05;
            if (growthRate < 0 && burnRate > 200) survivalScore -= 0.1;
            
            // Normalize to 0-1 range
            survivalScore = Math.max(0.05, Math.min(0.95, survivalScore));
            
            // Update display
            const percentage = Math.round(survivalScore * 100);
            document.getElementById('survivalProbability').textContent = percentage + '%';
            
            const survival = getSurvivalLevel(survivalScore);
            const levelElement = document.getElementById('survivalLevel');
            levelElement.textContent = survival.level;
            levelElement.className = `px-4 py-2 rounded text-sm font-medium ${survival.class}`;
            
            // Update prediction circle color
            const circle = document.getElementById('predictionCircle');
            if (percentage >= 75) {
                circle.style.background = 'conic-gradient(from 0deg, #10b981 0deg, #10b981 360deg)';
            } else if (percentage >= 45) {
                circle.style.background = 'conic-gradient(from 0deg, #f59e0b 0deg, #f59e0b 360deg)';
            } else {
                circle.style.background = 'conic-gradient(from 0deg, #ef4444 0deg, #ef4444 360deg)';
            }
        }

        function retrainModel() {
            // Simulate model retraining
            const button = event.target;
            button.textContent = 'Retraining...';
            button.disabled = true;
            
            setTimeout(() => {
                // Update metrics with slight variations
                const baseAccuracy = 87.4;
                const variation = (Math.random() - 0.5) * 4;
                
                document.getElementById('accuracy').textContent = (baseAccuracy + variation).toFixed(1) + '%';
                document.getElementById('precision').textContent = (89.2 + variation * 0.8).toFixed(1) + '%';
                document.getElementById('recall').textContent = (85.1 + variation * 1.2).toFixed(1) + '%';
                document.getElementById('f1Score').textContent = (0.871 + variation * 0.01).toFixed(3);
                
                generateNewStartups();
                button.textContent = 'Retrain Model';
                button.disabled = false;
            }, 2000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            generateNewStartups();
            updatePrediction();
        });
    </script>
</body>
</html>
