<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automated KPI Report Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        .glass-card {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chart-wrapper {
            position: relative;
            width: 100%;
            height: 200px;
        }
        .chart-wrapper canvas {
            position: absolute !important;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen p-4 md:p-6 lg:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header [[memory:7788592]] -->
        <div class="glass-card rounded-xl p-6 mb-6">
            <h1 class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-cyan-400 to-teal-400 bg-clip-text text-transparent mb-4">
                Automated KPI Report Generator
            </h1>
            <p class="text-gray-400 mb-4">
                Generate executive KPI reports instantly from mock P&L data. This demo demonstrates automated calculation 
                of EBITDA, burn rate, runway, and other critical metrics, producing board-ready reports that would 
                typically take hours to prepare manually.
            </p>
            <button onclick="generateReport()" class="px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg flex items-center gap-2">
                <i data-lucide="file-text" class="w-4 h-4"></i>
                Generate Report
            </button>
        </div>

        <!-- Report Output -->
        <div id="reportContent" class="space-y-6">
            <!-- Executive Summary -->
            <div class="glass-card rounded-xl p-6">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <i data-lucide="chart-line" class="w-5 h-5 text-cyan-400"></i>
                    Executive Summary
                </h2>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div>
                        <div class="text-sm text-gray-400">Revenue (TTM)</div>
                        <div id="revenueTTM" class="text-2xl font-bold text-cyan-400">$0M</div>
                        <div id="revenueGrowth" class="text-xs text-green-400">+0% YoY</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">EBITDA</div>
                        <div id="ebitda" class="text-2xl font-bold text-teal-400">$0M</div>
                        <div id="ebitdaMargin" class="text-xs text-gray-400">0% margin</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">Burn Rate</div>
                        <div id="burnRate" class="text-2xl font-bold text-orange-400">$0K</div>
                        <div class="text-xs text-gray-400">Monthly</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-400">Runway</div>
                        <div id="runway" class="text-2xl font-bold text-blue-400">0</div>
                        <div class="text-xs text-gray-400">Months</div>
                    </div>
                </div>
            </div>

            <!-- Revenue Trend -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-lg font-bold mb-4">Revenue Trend (Last 12 Months)</h3>
                <div class="chart-wrapper">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>

            <!-- P&L Summary -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-lg font-bold mb-4">P&L Summary</h3>
                <table class="w-full text-sm">
                    <tbody id="plTable">
                        <tr class="border-b border-gray-800">
                            <td class="py-2">Revenue</td>
                            <td class="text-right" id="plRevenue">$0</td>
                        </tr>
                        <tr class="border-b border-gray-800">
                            <td class="py-2">COGS</td>
                            <td class="text-right text-red-400" id="plCogs">($0)</td>
                        </tr>
                        <tr class="border-b border-gray-800 font-bold">
                            <td class="py-2">Gross Profit</td>
                            <td class="text-right text-green-400" id="plGross">$0</td>
                        </tr>
                        <tr class="border-b border-gray-800">
                            <td class="py-2">Operating Expenses</td>
                            <td class="text-right text-red-400" id="plOpex">($0)</td>
                        </tr>
                        <tr class="font-bold text-lg">
                            <td class="py-2">EBITDA</td>
                            <td class="text-right text-cyan-400" id="plEbitda">$0</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Key Ratios -->
            <div class="glass-card rounded-xl p-6">
                <h3 class="text-lg font-bold mb-4">Key Ratios & Metrics</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4 text-sm">
                    <div>
                        <div class="text-gray-400">Gross Margin</div>
                        <div id="grossMargin" class="text-lg font-bold">0%</div>
                    </div>
                    <div>
                        <div class="text-gray-400">CAC Payback</div>
                        <div id="cacPayback" class="text-lg font-bold">0 months</div>
                    </div>
                    <div>
                        <div class="text-gray-400">LTV/CAC</div>
                        <div id="ltvCac" class="text-lg font-bold">0x</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Rule of 40</div>
                        <div id="rule40" class="text-lg font-bold">0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Magic Number</div>
                        <div id="magicNumber" class="text-lg font-bold">0.0</div>
                    </div>
                    <div>
                        <div class="text-gray-400">Quick Ratio</div>
                        <div id="quickRatio" class="text-lg font-bold">0.0</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let revenueChart = null;

        function generateReport() {
            // Generate mock P&L data
            const currentMonth = 5400000 / 12;
            const revenue = Array.from({length: 12}, (_, i) => 
                currentMonth * (1 + 0.05 * (i - 6)) + Math.random() * 50000
            );
            
            const ttm = revenue.reduce((a, b) => a + b, 0);
            const cogs = ttm * 0.28;
            const gross = ttm - cogs;
            const opex = ttm * 0.65;
            const ebitda = gross - opex;
            const burn = ebitda < 0 ? Math.abs(ebitda / 12) : 0;
            const cash = 3200000;
            const runway = burn > 0 ? Math.floor(cash / burn) : 999;
            
            // Update summary
            document.getElementById('revenueTTM').textContent = `$${(ttm/1000000).toFixed(1)}M`;
            document.getElementById('revenueGrowth').textContent = '+42% YoY';
            document.getElementById('ebitda').textContent = `$${(ebitda/1000000).toFixed(1)}M`;
            document.getElementById('ebitdaMargin').textContent = `${(ebitda/ttm*100).toFixed(0)}% margin`;
            document.getElementById('burnRate').textContent = `$${(burn/1000).toFixed(0)}K`;
            document.getElementById('runway').textContent = runway > 100 ? 'âˆž' : runway;
            
            // Update P&L
            document.getElementById('plRevenue').textContent = `$${(ttm/1000000).toFixed(1)}M`;
            document.getElementById('plCogs').textContent = `($${(cogs/1000000).toFixed(1)}M)`;
            document.getElementById('plGross').textContent = `$${(gross/1000000).toFixed(1)}M`;
            document.getElementById('plOpex').textContent = `($${(opex/1000000).toFixed(1)}M)`;
            document.getElementById('plEbitda').textContent = `$${(ebitda/1000000).toFixed(1)}M`;
            
            // Update ratios
            document.getElementById('grossMargin').textContent = `${(gross/ttm*100).toFixed(0)}%`;
            document.getElementById('cacPayback').textContent = '14 months';
            document.getElementById('ltvCac').textContent = '3.8x';
            document.getElementById('rule40').textContent = `${(42 + (ebitda/ttm*100)).toFixed(0)}`;
            document.getElementById('magicNumber').textContent = '0.9';
            document.getElementById('quickRatio').textContent = '2.1';
            
            // Update chart
            updateRevenueChart(revenue);
        }

        function updateRevenueChart(data) {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            if (revenueChart) revenueChart.destroy();
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const currentMonth = new Date().getMonth();
            const labels = [...months.slice(currentMonth + 1), ...months.slice(0, currentMonth + 1)];
            
            revenueChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Monthly Revenue',
                        data: data.map(d => d/1000),
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'K';
                                }
                            }
                        }
                    }
                }
            });
        }

        // Auto-generate on load
        window.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            generateReport();
        });
    </script>
</body>
</html>
